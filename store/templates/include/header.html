{% load static %}
<head>
        <title>Luigi's</title>
        {% comment %} <meta http-equiv="X-UA-Compatible" content="IE=edge"> {% endcomment %}
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

        <!-- Font -->
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'fonts/beyond_the_mountains-webfont.css' %}" type="text/css"/>

        <!-- Stylesheets -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
        <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/simple-line-icons/2.2.4/css/simple-line-icons.min.css'>

        <link href="{% static 'plugin-frameworks/bootstrap.min.css' %}" rel="stylesheet">
        <link href="{% static 'plugin-frameworks/swiper.css' %}" rel="stylesheet">
        <link href="{% static 'fonts/ionicons.css' %}" rel="stylesheet">
        <link href="{% static 'common/style.css' %}" rel="stylesheet">
        <script type="text/javascript" src="{% static 'js/cart.js' %}"></script>

        <script type="text/javascript">
          function getCookie(name) {
              var cookieValue = null;
              if (document.cookie && document.cookie !== '') {
                  var cookies = document.cookie.split(';');
                  for (var i = 0; i < cookies.length; i++) {
                      var cookie = cookies[i].trim();
                      // Does this cookie string begin with the name we want?
                      if (cookie.substring(0, name.length + 1) === (name + '=')) {
                          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                          break;
                      }
                  }
              }
              return cookieValue;
          }

          function uuidv4() {
            return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
              var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);
              return v.toString(16);
            });
          }

          let device = getCookie('device')

          if (device == null || device == undefined){
            device = uuidv4()
          }

          document.cookie ='device=' + device + ";domain=;path=/"
        </script>


        <script type="text/javascript">
          var user = '{{request.user}}'

          function getToken(name) {
              var cookieValue = null;
              if (document.cookie && document.cookie !== '') {
                  var cookies = document.cookie.split(';');
                  for (var i = 0; i < cookies.length; i++) {
                      var cookie = cookies[i].trim();
                      // Does this cookie string begin with the name we want?
                      if (cookie.substring(0, name.length + 1) === (name + '=')) {
                          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                          break;
                      }
                  }
              }
              return cookieValue;
          }
          var csrftoken = getToken('csrftoken')

          function getCookie(name) {
              // Split cookie string and get all individual name=value pairs in an array
              var cookieArr = document.cookie.split(";");

              // Loop through the array elements
              for(var i = 0; i < cookieArr.length; i++) {
                  var cookiePair = cookieArr[i].split("=");

                  /* Removing whitespace at the beginning of the cookie name
                  and compare it with the given string */
                  if(name == cookiePair[0].trim()) {
                      // Decode the cookie value and return
                      return decodeURIComponent(cookiePair[1]);
                  }
              }
              return null;
          }
          var cart = JSON.parse(getCookie('cart'))

          if (cart == undefined){
            cart = {}
            console.log('Cart Created!', cart)
            document.cookie ='cart=' + JSON.stringify(cart) + ";domain=;path=/"
          }
          console.log('Cart:', cart)
	      </script>
        <style>
          #cart-icon{
            width:25px;
            display: inline-block;
            margin-left: 15px;
          }
          #cart-total{
            position: absolute;
            top: 30px;
            margin-left: 50px;
            display: block;
            text-align: center;
            color:#fff;
            background-color: red;
            width: 20px;
            height: 25px;
            border-radius: 50%;
            font-size: 14px;
          }

        </style>
</head>
<header>
        <div class="container">
                <a class="logo" href="{% url 'store' %}"><img src="{% static 'images/logo-white.png' %}" alt="Logo"></a>

                <a class="menu-nav-icon" data-menu="#main-menu" href="#"><i class="ion-navicon"></i></a>

                <div class="right-area">
                     <ul>
                        <li>
                            <a class="plr-20 color-white btn-fill-primary" href="#">+34 685 778 8892</a>
                        </li>
                        <li>
                            <a href="{% url 'cart' %}">
                              <img  id="cart-icon" src="{% static 'images/cart.png' %}">
                            </a>
                            <p id="cart-total">{{cartItems}}</p>
                        </li>
                     </ul>
                     {% comment %} <div class='mini'>
                        <p class='products'>Empty</p>
                        <p class='names'></p>
                        <p class='miniprice'><p>
                        <p class='button -salmon center'><a href="{% url 'cart1' %}"></a></p>
                      </div>
                      <div class='cart icon-basket'>
                        <span class='number'></span>
                     </div> {% endcomment %}
                </div><!-- right-area -->

                <ul class="main-menu font-mountainsre" id="main-menu">
                        <li><a href="{% url 'store' %}">HOME</a></li>
                        <li><a href="{% url '02_about_us' %}">ABOUT US</a></li>
                        <li><a href="{% url '03_menu' %}">SERVICES</a></li>
                        <li><a href="{% url '04_blog' %}">NEWS</a></li>
                        <li><a href="{% url '05_contact' %}">CONTACT</a></li>
                </ul>     
        </div>
</header>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>

<script type="text/javascript" src="{% static 'js/cart.js' %}"></script>